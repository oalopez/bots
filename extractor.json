{
    "version": "1.0",
    "description": "Crawling configuration for Financial Statements for SuperFinanciera taken datos.gov.co",
    "extraction": {
        "type": "json-all-records",
        "rules": {
            "source": "https://www.datos.gov.co/resource/mxk5-ce6w.json",
            "method": "GET",
            "success-code": "200",
            "params": {
                "$where": "fecha_corte between '@global(_year)-12-31T00:00:00' and '@global(_year)-12-31T23:59:59'",
                "moneda": "0",
                "$$app_token": "7E7yadEKYf3pNpIaasEFu9OG6"
            },
            "pagination": {
                "type": "params",
                "next": {
                    "offset-param-name": "$offset",
                    "offset-start-value": "0",
                    "step-param-name": "$limit",
                    "step-value": "10"
                },
                "stop-sequence": {
                    "type": "page-limit",
                    "limit": "5"
                }
            },
            "total-records": {
                "type": "json",
                "value":{
                    "source": "https://www.datos.gov.co/resource/mxk5-ce6w.json",
                    "params": {
                        "$select": "count(*)",
                        "$where": "fecha_corte between '@global(_year)-12-31T00:00:00' and '@global(_year)-12-31T23:59:59'",
                        "moneda": "0",
                        "$$app_token": "7E7yadEKYf3pNpIaasEFu9OG6"
                    },
                    "element-jsonpath": "$.0.count"
                }
            }
        }
    }
}