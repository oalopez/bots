{
    "version": "1.0",
    "field_mappings": [
        {
            "field_name": "TIPO_IDENTIFICACION",
            "description": "Identification type. For this dataset, it is always '2' (NIT)",
            "output_order": 10,
            "optional": false,
            "transformation": {
                "type": "regex",
                "rules": {
                    "pattern": null,
                    "replacement": "2"
                }
            }
        },
        {
            "field_name": "_TIPO_ENTIDAD",
            "description": "Internal use only. Entity type. It is used to build the URL to get the identification number",
            "source_field": "$.tipo_entidad",
            "output_order": -1,
            "optional": true
        },
        {
            "field_name": "IDENTIFICACION",
            "description": "Identification number. It is obtained from the datos.gov.co dataset in JSON. The URL to load the data is built with the entity type (_TIPO_ENTIDAD) and this entity code",
            "source_field": "$.codigo_entidad",
            "output_order": 20,
            "optional": false,
            "transformations": [
                {
                    "type": "get-json-element",
                    "rules": {
                        "url": "https://www.datos.gov.co/resource/sr9n-792w.json?$where=cod_entidad=#IDENTIFICACION#&tipo_entidad=#_TIPO_ENTIDAD#",
                        "retrieve_element": "0.numeroidentificacion"
                    }
                }
            ]
        },
        {
            "field_name": "RAZON",
            "description": "Legal Name of the entity",
            "output_order": 1,
            "source_field": "$.nombre_entidad",
            "optional": false
        },
        {
            "field_name": "CODIGO_CUENTA",
            "description": "Account code",
            "output_order": 30,
            "source_field": "$.nombre_cuenta",
            "optional": false
        },
        {
            "field_name": "DESCRIPCION_CUENTA",
            "description": "Account description",
            "output_order": 40,
            "source_field": "$.cuenta",
            "optional": false           
        },
        {
            "field_name": "VALOR",
            "description": "Total Amount for the account in COP",
            "output_order": 50,
            "source_field": "$.valor",
            "optional": false
        },
        {
            "field_name": "NIIF",
            "description": "International Financial Reporting Standards flag. It is always 'TRUE' for this dataset",
            "output_order": 60,
            "optional": false,
            "transformation": {
                "type": "regex",
                "rules": {
                    "pattern": null,
                    "replacement": "TRUE"
                }
            }
        },
        {
            "field_name": "FECHA_FINANZAS",
            "description": "Cut-off date of the dataset. It is obtained from the dataset in JSON and transformed to the format 'MM/DD/YYYY'.",
            "output_order": 70,
            "source_field": "input",
            "optional": false,
            "transformation": {
                "type": "regex",
                "rules": {
                    "pattern": "(\\d{4})-(\\d{2})-(\\d{2})T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}",
                    "replacement": "{2}/{3}/{1}"
                }
            }
        }
    ],
    "separator": "~{<"
}
